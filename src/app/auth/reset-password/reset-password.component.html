<div *ngIf="form">
  <h1 id="title" class="title">Definir nova senha</h1>
  <div class="subtitle text-center">
    Escolha uma nova senha para acessar o portal.
  </div>
  <br />
  <br />
</div>

<form
  (ngSubmit)="submit()"
  [formGroup]="form"
  aria-labelledby="title"
  *ngIf="form"
>
  <div class="form-control-group">
    <label class="label" for="input-password">Nova senha</label>
    <input
      nbInput
      type="password"
      formControlName="password"
      id="input-password"
      placeholder="Nova senha"
      fullWidth
    />
    <small
      class="text-danger"
      *ngIf="
        form.get('password')?.touched &&
        form.get('password')?.hasError('minlength')
      "
    >
      A senha deve possuir ao menos 6 caracteres.
    </small>
  </div>

  <div class="form-control-group">
    <label class="label" for="input-confirm-password">Confirmar senha</label>
    <input
      nbInput
      type="password"
      formControlName="confirmPassword"
      id="input-confirm-password"
      placeholder="Confirme a senha"
      fullWidth
    />
    <small class="text-danger" *ngIf="showPasswordMismatch()">
      As senhas precisam ser iguais.
    </small>
  </div>

  <button
    nbButton
    fullWidth
    status="primary"
    [disabled]="!form.valid || isLoading"
    [class.btn-pulse]="isLoading"
  >
    Atualizar senha
  </button>
</form>

<nb-card
  accent="danger"
  *ngIf="isLoading || erro"
  [nbSpinner]="isLoading"
  nbSpinnerStatus="danger"
  nbSpinnerSize="large"
  nbSpinnerMessage="Atualizando senha"
>
  <nb-card-body class="text-center">
    {{ erro }}
  </nb-card-body>
</nb-card>

<section class="another-action" aria-label="Sign in">
  Lembrou da senha?
  <a class="text-link" routerLink="/auth/login">Fa√ßa o login</a>
</section>
