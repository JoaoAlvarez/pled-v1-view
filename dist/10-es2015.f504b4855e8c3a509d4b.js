(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{pr3Z:function(t,e,s){"use strict";s.r(e);var i=s("aceb"),n=s("tmjD"),o=s("3Pt+"),a=s("RS3s"),r=s("vTDv"),c=s("tyNb"),u=s("fXoL");let b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Lb({type:t,selectors:[["usuarios"]],decls:1,vars:0,template:function(t,e){1&t&&u.Sb(0,"router-outlet")},directives:[c.h],encapsulation:2}),t})();var l=s("FIB3"),d=s("nYR2"),h=s("PSD3"),m=s.n(h),p=s("UXd6");const f=[{path:"",component:b,children:[{path:"",redirectTo:"listar",pathMatch:"full"},{path:"listar",component:(()=>{class t{constructor(t,e){this.UsuariosService=t,this.router=e,this.settingsDefault={hideSubHeader:!0,noDataMessage:"N\xe3o h\xe1 nenhum dado para exibir",actions:{position:"right",columnTitle:"A\xe7\xf5es",add:!1,edit:!1,delete:!1},add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmSave:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{nome:{title:"Nome",type:"string",editable:!0},cpf:{title:"CPF",type:"string",editable:!1},email:{title:"E-Mail",type:"string",editable:!1},perfil:{title:"Perfil",type:"string"},validated:{title:"Validado",type:"custom",renderComponent:p.a},isAtivo:{title:"Status",type:"string",valuePrepareFunction:t=>t?"Ativo":"Inativo"}}},this.settings1=Object.assign(Object.assign({},this.settingsDefault),{actions:Object.assign(Object.assign({},this.settingsDefault.actions),{custom:[{name:"status",title:'<i class="nb-trash" title="Desativar usu\xe1rio"></i>'}]})}),this.settings2=Object.assign(Object.assign({},this.settingsDefault),{actions:Object.assign(Object.assign({},this.settingsDefault.actions),{custom:[{name:"status",title:'<i class="nb-loop" title="Ativar usu\xe1rio"></i>'}]})}),this.source=new a.a,this.source2=new a.a,this.getUsuarios()}getUsuarios(){this.UsuariosService.getUsuarios().pipe(Object(d.a)(()=>{})).subscribe(t=>{const e=t.filter(t=>t.isAtivo),s=t.filter(t=>!t.isAtivo);this.source.load(e),this.source2.load(s),this.source.refresh(),this.source2.refresh()})}onSearch(t=""){""!=t?this.source.setFilter([{field:"id",search:t},{field:"name",search:t},{field:"cpf",search:t},{field:"turma",search:t},{field:"onboardStatus",search:t}],!1):this.source.reset()}onDeleteConfirm(t,e){if(window.confirm("Tem certeza que deseja "+(t.data.isAtivo?"desativar":"ativar")+" este usu\xe1rio?")){let s="";"source1"==e?s="desativado":"source2"==e&&(s="ativado"),this.UsuariosService.deleteUser({id:t.data._id,status:!t.data.isAtivo}).pipe(Object(d.a)(()=>{})).subscribe(e=>{m.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}).fire({icon:"success",title:"O usu\xe1rio "+t.data.nome+" "+s+" com sucesso"}),this.getUsuarios()})}}onCustomAction(t,e){"status"==t.action&&this.onDeleteConfirm(t,e)}}return t.\u0275fac=function(e){return new(e||t)(u.Rb(l.a),u.Rb(c.c))},t.\u0275cmp=u.Lb({type:t,selectors:[["usuarios-listar"]],decls:15,vars:4,consts:[[1,"row"],[1,"col-md-5"],[1,"col-md-5","ml-auto","text-right"],["nbInput","","type","text","placeholder","Buscar",1,"search",3,"keydown.enter"],["search",""],["tabTitle","Ativos"],[3,"settings","source","custom"],["tabTitle","Inativos"]],template:function(t,e){if(1&t){const t=u.Yb();u.Xb(0,"nb-card"),u.Xb(1,"nb-card-header"),u.Xb(2,"div",0),u.Xb(3,"div",1),u.Xb(4,"h4"),u.Gc(5,"Usu\xe1rios"),u.Wb(),u.Wb(),u.Xb(6,"div",2),u.Xb(7,"input",3,4),u.fc("keydown.enter",(function(){u.wc(t);const s=u.uc(8);return e.onSearch(s.value)})),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Xb(9,"nb-card-body"),u.Xb(10,"nb-tabset"),u.Xb(11,"nb-tab",5),u.Xb(12,"ng2-smart-table",6),u.fc("custom",(function(t){return e.onCustomAction(t,"source1")})),u.Wb(),u.Wb(),u.Xb(13,"nb-tab",7),u.Xb(14,"ng2-smart-table",6),u.fc("custom",(function(t){return e.onCustomAction(t,"source2")})),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Wb()}2&t&&(u.Eb(12),u.nc("settings",e.settings1)("source",e.source),u.Eb(2),u.nc("settings",e.settings2)("source",e.source2))},directives:[i.x,i.z,i.L,i.w,i.pb,i.ob,a.b],styles:["[_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{padding-left:0;padding-right:0}"]}),t})()}]}];let g=(()=>{class t{}return t.\u0275mod=u.Pb({type:t}),t.\u0275inj=u.Ob({factory:function(e){return new(e||t)},imports:[[c.g.forChild(f)],c.g]}),t})();s.d(e,"UsuariosModule",(function(){return v}));let v=(()=>{class t{}return t.\u0275mod=u.Pb({type:t}),t.\u0275inj=u.Ob({factory:function(e){return new(e||t)},imports:[[i.A,i.vb,i.K,i.M,i.n,i.D,i.G,i.eb,i.hb,i.xb,r.a,i.t,g,a.c,o.x,n.b,i.mb,i.ub,i.qb]]}),t})()}}]);