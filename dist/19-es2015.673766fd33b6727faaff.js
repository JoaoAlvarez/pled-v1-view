(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{ZEuG:function(e,t,r){"use strict";r.r(t);var i=r("ofXK"),n=r("tyNb");const o=[{title:"Voltar",icon:"arrow-back-outline",link:"/"},{title:"Meus dados",icon:"people-outline",link:"/perfil/meusdados"}];var s=r("fXoL"),a=r("mgFL"),b=r("aceb");let c=(()=>{class e{constructor(){this.menu=o}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Lb({type:e,selectors:[["ngx-perfil"]],decls:3,vars:1,consts:[[3,"items"]],template:function(e,t){1&e&&(s.Xb(0,"ngx-one-column-layout"),s.Sb(1,"nb-menu",0),s.Sb(2,"router-outlet"),s.Wb()),2&e&&(s.Eb(1),s.nc("items",t.menu))},directives:[a.a,b.Y,n.h],styles:[""]}),e})();var u=r("ORBq"),l=r("3Pt+"),d=r("nYR2"),p=r("lJxs"),m=r("tk/3");let f=(()=>{class e{constructor(e){this.httpClient=e}getUserDetail(){return this.httpClient.get("/user/detail").pipe(Object(p.a)(e=>{if(e)return e}))}atualizarUsuario(e){return this.httpClient.put("/user/atualizar",e).pipe(Object(p.a)(e=>{if(e)return e}))}atualizarSenha(e){return this.httpClient.put("/user/updatepassword",e).pipe(Object(p.a)(e=>{if(e)return e}))}}return e.\u0275fac=function(t){return new(t||e)(s.bc(m.b))},e.\u0275prov=s.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=r("PSD3"),v=r.n(h);function g(e,t){1&e&&(s.Xb(0,"div",6),s.Xb(1,"label",7),s.Gc(2,"Nome"),s.Wb(),s.Xb(3,"div",8),s.Sb(4,"input",12),s.Wb(),s.Wb())}function W(e,t){1&e&&(s.Xb(0,"div",6),s.Xb(1,"label",7),s.Gc(2,"E-mail"),s.Wb(),s.Xb(3,"div",8),s.Sb(4,"input",13),s.Wb(),s.Wb())}function X(e,t){1&e&&(s.Xb(0,"div",6),s.Xb(1,"label",7),s.Gc(2,"CPF"),s.Wb(),s.Xb(3,"div",8),s.Sb(4,"input",14),s.Wb(),s.Wb())}function S(e,t){if(1&e){const e=s.Yb();s.Xb(0,"form",4),s.fc("ngSubmit",(function(){return s.wc(e),s.hc().submit()})),s.Ec(1,g,5,0,"div",5),s.Ec(2,W,5,0,"div",5),s.Ec(3,X,5,0,"div",5),s.Xb(4,"div",6),s.Xb(5,"label",7),s.Gc(6,"Senha"),s.Wb(),s.Xb(7,"div",8),s.Sb(8,"input",9),s.Wb(),s.Wb(),s.Xb(9,"div",6),s.Xb(10,"div",10),s.Xb(11,"button",11),s.Gc(12,"Alterar seus dados"),s.Wb(),s.Wb(),s.Wb(),s.Wb()}if(2&e){const e=s.hc();s.nc("formGroup",e.form),s.Eb(1),s.nc("ngIf","Administrador"!=e.userDetail.perfil),s.Eb(1),s.nc("ngIf","Administrador"!=e.userDetail.perfil),s.Eb(1),s.nc("ngIf","Administrador"!=e.userDetail.perfil),s.Eb(8),s.nc("disabled",e.form.invalid||e.isLoading)}}const w=[{path:"",component:c,children:[{path:"meusdados",component:(()=>{class e{constructor(e,t,r){this.formBuilder=e,this.PerfilService=t,this.router=r,this.isLoading=!1,this.userDetails()}ngOnInit(){}userDetails(){return this.PerfilService.getUserDetail().pipe(Object(d.a)(()=>{})).subscribe(e=>{this.userDetail=e,this.createForm(e)})}createForm(e){this.form=this.formBuilder.group({nome:[e.nome,l.A.required],email:[e.email,l.A.required],cpf:[e.cpf,l.A.required],password:[""]})}submit(){this.isLoading=!0;const e=Object.assign({},this.form.value);this.PerfilService.atualizarUsuario(e).subscribe(t=>{e.password&&this.PerfilService.atualizarSenha(e).pipe(Object(d.a)(()=>{this.isLoading=!1})).subscribe(e=>{}),this.isLoading=!1,t&&v.a.fire("Ok","Dados alterados com sucesso","success")})}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(l.d),s.Rb(f),s.Rb(n.c))},e.\u0275cmp=s.Lb({type:e,selectors:[["ngx-meusdados"]],decls:8,vars:2,consts:[["nbSpinnerStatus","primary","nbSpinnerSize","large","nbSpinnerMessage","",3,"nbSpinner"],[1,"row"],[1,"col-md-5"],["action","",3,"formGroup","ngSubmit",4,"ngIf"],["action","",3,"formGroup","ngSubmit"],["class","form-group row",4,"ngIf"],[1,"form-group","row"],["for","nome",1,"label","col-sm-2","col-form-label"],[1,"col-sm-10"],["type","password","nbInput","","fullWidth","","id","password","placeholder","Nova senha","formControlName","password"],[1,"offset-sm-2","col-sm-10"],["type","submit","nbButton","","status","primary",3,"disabled"],["type","text","nbInput","","fullWidth","","id","nome","placeholder","Nome","formControlName","nome"],["type","text","nbInput","","fullWidth","","id","email","placeholder","Nome","formControlName","email"],["type","text","nbInput","","fullWidth","","id","cpf","placeholder","CPF","formControlName","cpf"]],template:function(e,t){1&e&&(s.Xb(0,"nb-card",0),s.Xb(1,"nb-card-header"),s.Xb(2,"div",1),s.Xb(3,"div",2),s.Xb(4,"h4"),s.Gc(5,"Meus dados"),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Xb(6,"nb-card-body"),s.Ec(7,S,13,5,"form",3),s.Wb(),s.Wb()),2&e&&(s.nc("nbSpinner",t.isLoading),s.Eb(7),s.nc("ngIf",t.form))},directives:[b.x,b.lb,b.z,b.w,i.m,l.C,l.q,l.h,b.L,l.b,l.p,l.g,b.s],styles:[""]}),e})()},{path:"**",component:u.a}]}];let y=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},imports:[[n.g.forChild(w)],n.g]}),e})();var C=r("vTDv"),D=r("iPsQ"),E=r("tmjD");r.d(t,"PerfilModule",(function(){return I}));let I=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},imports:[[i.c,C.a,b.Z,D.a,y,l.x,E.b,b.t,b.M,b.A,b.mb]]}),e})()}}]);