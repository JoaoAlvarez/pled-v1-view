(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{l2oJ:function(e,i,t){"use strict";t.r(i);var r=t("aceb"),s=t("tmjD"),o=t("3Pt+"),n=t("RS3s"),a=t("vTDv"),c=t("tyNb"),l=t("fXoL");let b=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=l.Lb({type:e,selectors:[["materiais"]],decls:1,vars:0,template:function(e,i){1&e&&l.Sb(0,"router-outlet")},directives:[c.h],encapsulation:2}),e})();var d=t("sRfN"),u=t("OE9b"),m=t("nYR2"),f=t("ofXK");function p(e,i){if(1&e&&(l.Xb(0,"nb-option",12),l.Gc(1),l.Wb()),2&e){const e=i.$implicit;l.nc("value",e.idProfessorDisciplina),l.Eb(1),l.Ic(" ",e.nome,"")}}function h(e,i){if(1&e&&(l.Xb(0,"nb-option",12),l.Gc(1),l.Wb()),2&e){const e=i.$implicit;l.nc("value",e.id),l.Eb(1),l.Hc(e.nome)}}let g=(()=>{class e{constructor(e,i,t){this.service=e,this.ProfessorService=i,this.router=t,this.isLoading=!0,this.turmas=[],this.turmasFiltered=[],this.disciplinas=[],this.settings={hideSubHeader:!0,noDataMessage:"N\xe3o h\xe1 nenhum dado para exibir",actions:{position:"right",columnTitle:"A\xe7\xf5es",add:!1,edit:!1,delete:!1,custom:[{name:"delete",title:'<i class="nb-trash"></i>'}]},add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmSave:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{nome:{title:"Nome",type:"string",editable:!1},descricao:{title:"Descri\xe7\xe3o",type:"string",editable:!1},url:{title:"Link",type:"string",editable:!1}}},this.source=new n.a}ngOnInit(){this.getDisciplinas(),this.getTurmasProfessor()}getTurmasProfessor(){this.ProfessorService.getTurmas().subscribe(e=>{this.isLoading=!1,this.turmas=e})}getDisciplinas(){this.disciplinas=this.ProfessorService.professorDetalhe.disciplinas}filtrarTurma(e){this.turmasFiltered=this.turmas.filter(i=>i.disciplinas.some(i=>i.idProfessorDisciplina==e))}getMateriais(e,i){this.ProfessorService.getMateriais(e,i).pipe(Object(m.a)(()=>{})).subscribe(e=>{console.log(e),this.source.load(e),this.source.refresh()})}onSearch(e=""){""!=e?this.source.setFilter([{field:"id",search:e},{field:"nome",search:e},{field:"descricao",search:e},{field:"onboardStatus",search:e}],!1):this.source.reset()}onCustomAction(e){"edit"==e.action?this.router.navigateByUrl("/instituicao/disciplinas/editar/"+e.data._id):"delete"==e.action&&this.onDeleteConfirm(e)}onDeleteConfirm(e){console.log(e),window.confirm("Tem certeza que deseja rejeitar a aprova\xe7\xe3o deste usu\xe1rio?")&&this.ProfessorService.deletarMaterial(e.data._id).pipe(Object(m.a)(()=>{})).subscribe(e=>{this.getMateriais(this.selectedDisciplina,this.selectedTurma)})}onEditConfirm(e){console.log(e)}}return e.\u0275fac=function(i){return new(i||e)(l.Rb(d.a),l.Rb(u.a),l.Rb(c.c))},e.\u0275cmp=l.Lb({type:e,selectors:[["materiais-listar"]],decls:17,vars:7,consts:[["nbSpinnerStatus","primary","nbSpinnerSize","large","nbSpinnerMessage","Carregando",3,"nbSpinner"],[1,"d-flex"],[1,""],[1,"ml-auto","text-right","d-flex"],["placeholder","Selecione uma disciplina","filled","","status","primary",1,"mr-4",3,"selected","selectedChange"],["disciplinaSelect",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","Selecione uma turma","filled","","status","primary",1,"mr-4",3,"selected","selectedChange"],["turmaSelect",""],["nbInput","","type","text","placeholder","Buscar",1,"search",3,"keydown.enter"],["search",""],[3,"settings","source","deleteConfirm","custom","editConfirm"],[3,"value"]],template:function(e,i){if(1&e){const e=l.Yb();l.Xb(0,"nb-card",0),l.Xb(1,"nb-card-header"),l.Xb(2,"div",1),l.Xb(3,"div",2),l.Xb(4,"h4"),l.Gc(5,"Materiais"),l.Wb(),l.Wb(),l.Xb(6,"div",3),l.Xb(7,"nb-select",4,5),l.fc("selectedChange",(function(e){return i.selectedDisciplina=e}))("selectedChange",(function(){return i.filtrarTurma(i.selectedDisciplina)})),l.Ec(9,p,2,2,"nb-option",6),l.Wb(),l.Xb(10,"nb-select",7,8),l.fc("selectedChange",(function(e){return i.selectedTurma=e}))("selectedChange",(function(){return i.getMateriais(i.selectedDisciplina,i.selectedTurma)})),l.Ec(12,h,2,2,"nb-option",6),l.Wb(),l.Xb(13,"input",9,10),l.fc("keydown.enter",(function(){l.wc(e);const t=l.uc(14);return i.onSearch(t.value)})),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(15,"nb-card-body"),l.Xb(16,"ng2-smart-table",11),l.fc("deleteConfirm",(function(e){return i.onDeleteConfirm(e)}))("custom",(function(e){return i.onCustomAction(e)}))("editConfirm",(function(e){return i.onEditConfirm(e)})),l.Wb(),l.Wb(),l.Wb()}2&e&&(l.nc("nbSpinner",i.isLoading),l.Eb(7),l.nc("selected",i.selectedDisciplina),l.Eb(2),l.nc("ngForOf",i.disciplinas),l.Eb(1),l.nc("selected",i.selectedTurma),l.Eb(2),l.nc("ngForOf",i.turmasFiltered),l.Eb(4),l.nc("settings",i.settings)("source",i.source))},directives:[r.x,r.lb,r.z,r.gb,f.l,r.L,r.w,n.b,r.bb],styles:[""]}),e})();var v=t("PSD3"),W=t.n(v);function X(e,i){if(1&e&&(l.Xb(0,"nb-option",23),l.Gc(1),l.Wb()),2&e){const e=i.$implicit;l.nc("value",e.idProfessorDisciplina),l.Eb(1),l.Ic(" ",e.nome," ")}}function S(e,i){if(1&e&&(l.Xb(0,"nb-option",23),l.Gc(1),l.Wb()),2&e){const e=i.$implicit;l.nc("value",e.id),l.Eb(1),l.Hc(e.nome)}}function y(e,i){1&e&&(l.Xb(0,"div",4),l.Xb(1,"label",24),l.Gc(2,"Url"),l.Wb(),l.Xb(3,"div",16),l.Sb(4,"input",25),l.Wb(),l.Wb())}function C(e,i){if(1&e){const e=l.Yb();l.Xb(0,"div",4),l.Xb(1,"label",24),l.Gc(2,"Arquivo"),l.Wb(),l.Xb(3,"div",16),l.Xb(4,"input",26),l.fc("change",(function(i){return l.wc(e),l.hc().fileChange(i)})),l.Wb(),l.Wb(),l.Wb()}}const D=[{path:"",component:b,children:[{path:"",redirectTo:"listar",pathMatch:"full"},{path:"listar",component:g},{path:"editar/:_id",component:(()=>{class e{constructor(e,i,t,r){this.route=e,this.formBuilder=i,this.ProfessorService=t,this.router=r,this.isLoading=!1}ngOnInit(){this.route.paramMap.subscribe(e=>{this.id=e.get("_id")})}submit(){this.isLoading=!0;const e=Object.assign({},this.form.value);this.ProfessorService.editarMateriais(e).pipe(Object(m.a)(()=>{this.isLoading=!1})).subscribe(e=>{this.isLoading=!1,e&&(W.a.fire("Ok","Disciplina atualizada com sucesso","success"),this.router.navigateByUrl("/professor/materiais/listar"))})}}return e.\u0275fac=function(i){return new(i||e)(l.Rb(c.a),l.Rb(o.e),l.Rb(u.a),l.Rb(c.c))},e.\u0275cmp=l.Lb({type:e,selectors:[["materiais-editar"]],decls:22,vars:3,consts:[["nbSpinnerStatus","primary","nbSpinnerSize","large","nbSpinnerMessage","",3,"nbSpinner"],[1,"row"],[1,"col-md-5"],["action","",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","nome",1,"label","col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","nbInput","","fullWidth","","id","nome","placeholder","Nome","formControlName","nome"],["for","descricao",1,"label","col-sm-2","col-form-label"],["type","text","nbInput","","fullWidth","","id","descricao","placeholder","Descri\xe7\xe3o","formControlName","descricao"],[1,"offset-sm-2","col-sm-10"],["type","submit","nbButton","","status","primary",3,"disabled"]],template:function(e,i){1&e&&(l.Xb(0,"nb-card",0),l.Xb(1,"nb-card-header"),l.Xb(2,"div",1),l.Xb(3,"div",2),l.Xb(4,"h4"),l.Gc(5,"Editar Materiais"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(6,"nb-card-body"),l.Xb(7,"form",3),l.fc("ngSubmit",(function(){return i.submit()})),l.Xb(8,"div",4),l.Xb(9,"label",5),l.Gc(10,"Nome"),l.Wb(),l.Xb(11,"div",6),l.Sb(12,"input",7),l.Wb(),l.Wb(),l.Xb(13,"div",4),l.Xb(14,"label",8),l.Gc(15,"Descri\xe7\xe3o"),l.Wb(),l.Xb(16,"div",6),l.Sb(17,"input",9),l.Wb(),l.Wb(),l.Xb(18,"div",4),l.Xb(19,"div",10),l.Xb(20,"button",11),l.Gc(21,"Atualizar"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e&&(l.nc("nbSpinner",i.isLoading),l.Eb(7),l.nc("formGroup",i.form),l.Eb(13),l.nc("disabled",i.form.invalid||i.isLoading))},directives:[r.x,r.lb,r.z,r.w,o.D,o.r,o.i,r.L,o.c,o.q,o.h,r.s],styles:[""]}),e})()},{path:"cadastrar",component:(()=>{class e{constructor(e,i,t){this.formBuilder=e,this.ProfessorService=i,this.router=t,this.isLoading=!1,this.turmas=[],this.turmasFiltered=[],this.disciplinas=[]}ngOnInit(){this.getTurmasProfessor(),this.getDetalhesProfessor(),this.createForm(),this.form.get("disciplinas").valueChanges.subscribe(e=>{this.turmasFiltered=this.turmas.filter(i=>i.disciplinas.some(i=>i.idProfessorDisciplina==e))})}getTurmasProfessor(){this.ProfessorService.getTurmas().subscribe(e=>{this.isLoading=!1,this.turmas=e})}getDetalhesProfessor(){this.ProfessorService.getProfessorDetalhes().subscribe(e=>{this.isLoading=!1,this.disciplinas=e.disciplinas})}get material(){return this.form.get("material")}fileChange(e){this.form.patchValue({fileSource:e.target.files[0]})}createForm(){this.form=this.formBuilder.group({turma:["",o.B.required],disciplinas:["",o.B.required],tipo_material:["",o.B.required],file:[""],fileSource:[""],material:this.formBuilder.group({nome:["",o.B.required],descricao:["",o.B.required],url:[""]})})}submit(){this.isLoading=!0;const e=Object.assign({},this.form.value);this.ProfessorService.inserirMateriais(e).pipe(Object(m.a)(()=>{this.isLoading=!1})).subscribe(e=>{this.isLoading=!1,e&&(W.a.fire("Ok","Material adicionado com sucesso","success"),this.router.navigateByUrl("/professor/materiais"))})}setRequired(){return[o.B.required]}changeTipo(e){"arquivo"===e?(this.form.controls.file.setValidators(this.setRequired()),this.form.controls.file.setValue("")):(this.material.controls.url.setValidators(this.setRequired()),this.material.controls.url.setValue("")),this.form.updateValueAndValidity()}}return e.\u0275fac=function(i){return new(i||e)(l.Rb(o.e),l.Rb(u.a),l.Rb(c.c))},e.\u0275cmp=l.Lb({type:e,selectors:[["materiais-cadastrar"]],decls:46,vars:8,consts:[["nbSpinnerStatus","primary","nbSpinnerSize","large","nbSpinnerMessage","",3,"nbSpinner"],[1,"row"],[1,"col-md-5"],["action","",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","disciplinas",1,"label","col-sm-2","col-form-label"],[1,"col-sm-10","d-flex"],["multiple","","placeholder","Selecione a disciplina","id","disciplinas","formControlName","disciplinas"],[3,"value",4,"ngFor","ngForOf"],["for","turmas",1,"label","col-sm-2","col-form-label"],["placeholder","Selecione as turmas","id","turma","formControlName","turma"],["placeholder","Selecione o tipo de material","id","tipo_material","formControlName","tipo_material",3,"selectedChange"],["value","arquivo"],["value","url"],[3,"formGroup"],["for","nome",1,"label","col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","nbInput","","id","nome","placeholder","Nome","formControlName","nome"],["for","descricao",1,"label","col-sm-2","col-form-label"],["type","text","nbInput","","id","descricao","placeholder","Descri\xe7\xe3o","formControlName","descricao"],["class","form-group row",4,"ngIf"],[1,"offset-sm-2","col-sm-10"],["type","submit","nbButton","","status","primary",3,"disabled"],[3,"value"],["for","url",1,"label","col-sm-2","col-form-label"],["type","text","nbInput","","fullWidth","","id","url","placeholder","Url","formControlName","url"],["type","file","nbInput","","fullWidth","","id","url","placeholder","Arquivo","formControlName","file",3,"change"]],template:function(e,i){1&e&&(l.Xb(0,"nb-card",0),l.Xb(1,"nb-card-header"),l.Xb(2,"div",1),l.Xb(3,"div",2),l.Xb(4,"h4"),l.Gc(5,"Adicionar Material"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(6,"nb-card-body"),l.Xb(7,"form",3),l.fc("ngSubmit",(function(){return i.submit()})),l.Xb(8,"div",4),l.Xb(9,"label",5),l.Gc(10,"Disciplina"),l.Wb(),l.Xb(11,"div",6),l.Xb(12,"nb-select",7),l.Ec(13,X,2,2,"nb-option",8),l.Wb(),l.Wb(),l.Wb(),l.Xb(14,"div",4),l.Xb(15,"label",9),l.Gc(16,"Turma"),l.Wb(),l.Xb(17,"div",6),l.Xb(18,"nb-select",10),l.Ec(19,S,2,2,"nb-option",8),l.Wb(),l.Wb(),l.Wb(),l.Xb(20,"div",4),l.Xb(21,"label",5),l.Gc(22,"Tipo de material"),l.Wb(),l.Xb(23,"div",6),l.Xb(24,"nb-select",11),l.fc("selectedChange",(function(e){return i.changeTipo(e)})),l.Xb(25,"nb-option",12),l.Gc(26," Arquivo "),l.Wb(),l.Xb(27,"nb-option",13),l.Gc(28," Url "),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(29,"div",14),l.Xb(30,"div",4),l.Xb(31,"label",15),l.Gc(32,"T\xedtulo"),l.Wb(),l.Xb(33,"div",16),l.Sb(34,"input",17),l.Wb(),l.Wb(),l.Xb(35,"div",4),l.Xb(36,"label",18),l.Gc(37,"Descri\xe7\xe3o"),l.Wb(),l.Xb(38,"div",16),l.Sb(39,"input",19),l.Wb(),l.Wb(),l.Ec(40,y,5,0,"div",20),l.Wb(),l.Ec(41,C,5,0,"div",20),l.Xb(42,"div",4),l.Xb(43,"div",21),l.Xb(44,"button",22),l.Gc(45,"Adicionar"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e&&(l.nc("nbSpinner",i.isLoading),l.Eb(7),l.nc("formGroup",i.form),l.Eb(6),l.nc("ngForOf",i.disciplinas),l.Eb(6),l.nc("ngForOf",i.turmas),l.Eb(10),l.nc("formGroup",i.material),l.Eb(11),l.nc("ngIf","url"==i.form.controls.tipo_material.value),l.Eb(1),l.nc("ngIf","arquivo"==i.form.controls.tipo_material.value),l.Eb(3),l.nc("disabled",i.form.invalid||i.isLoading))},directives:[r.x,r.lb,r.z,r.w,o.D,o.r,o.i,r.gb,o.q,o.h,f.l,r.bb,r.L,o.c,f.m,r.s],styles:[""]}),e})()}]}];let E=(()=>{class e{}return e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({factory:function(i){return new(i||e)},imports:[[c.g.forChild(D)],c.g]}),e})();t.d(i,"MateriaisModule",(function(){return w}));let w=(()=>{class e{}return e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({factory:function(i){return new(i||e)},imports:[[r.A,r.vb,r.K,r.M,r.n,r.D,r.G,r.eb,r.hb,r.xb,a.a,r.t,E,n.c,o.y,s.b,r.mb]]}),e})()}}]);