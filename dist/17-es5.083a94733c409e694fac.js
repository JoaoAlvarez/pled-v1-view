function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{mQS9:function(e,t,n){"use strict";n.r(t);var i,o,r=n("aceb"),a=n("tmjD"),s=n("3Pt+"),c=n("RS3s"),u=n("vTDv"),l=n("tyNb"),b=n("fXoL"),d=((i=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=b.Lb({type:i,selectors:[["alunos"]],decls:1,vars:0,template:function(e,t){1&e&&b.Sb(0,"router-outlet")},directives:[l.h],encapsulation:2}),i),m=n("Mw0X"),f=n("nYR2"),p=n("PSD3"),h=n.n(p),v=n("FIB3"),g=n("UXd6"),y=((o=function(){function e(t,n,i){_classCallCheck(this,e),this.InstituicaoService=t,this.UsuarioService=n,this.router=i,this.settingsDefault={hideSubHeader:!0,noDataMessage:"N\xe3o h\xe1 nenhum dado para exibir",actions:{position:"right",columnTitle:"A\xe7\xf5es",add:!1,edit:!1,delete:!1,custom:[{name:"edit",title:'<i class="nb-edit"></i>'}]},add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmSave:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{nome:{title:"Nome",type:"string",editable:!0},email:{title:"E-mail",type:"string",editable:!1},validated:{title:"Validado",type:"custom",renderComponent:g.a},turmas:{title:"Turma",type:"string",editable:!1,valuePrepareFunction:function(e){return e.length>0?e[0].nome:""}}}},this.settings1=Object.assign(Object.assign({},this.settingsDefault),{actions:Object.assign(Object.assign({},this.settingsDefault.actions),{custom:[].concat(_toConsumableArray(this.settingsDefault.actions.custom),[{name:"status",title:'<i class="nb-trash" title="Desativar usu\xe1rio"></i>'}])})}),this.settings2=Object.assign(Object.assign({},this.settingsDefault),{actions:Object.assign(Object.assign({},this.settingsDefault.actions),{custom:[].concat(_toConsumableArray(this.settingsDefault.actions.custom),[{name:"status",title:'<i class="nb-loop" title="Ativar usu\xe1rio"></i>'}])})}),this.source=new c.a,this.source2=new c.a,this.getAlunos()}return _createClass(e,[{key:"getAlunos",value:function(){var e=this;this.InstituicaoService.getAlunos().pipe(Object(f.a)((function(){}))).subscribe((function(t){var n=t.filter((function(e){return e.isAtivo})),i=t.filter((function(e){return!e.isAtivo}));e.source.load(n),e.source2.load(i),e.source.refresh(),e.source2.refresh()}))}},{key:"onSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""!=e?this.source.setFilter([{field:"id",search:e},{field:"name",search:e},{field:"cpf",search:e},{field:"turma",search:e},{field:"onboardStatus",search:e}],!1):this.source.reset()}},{key:"onDeleteConfirm",value:function(e,t){var n=this;if(window.confirm("Tem certeza que deseja "+(e.data.isAtivo?"desativar":"ativar")+" este usu\xe1rio?")){var i="";"source1"==t?i="desativado":"source2"==t&&(i="ativado"),this.UsuarioService.deleteUser({id:e.data.id,status:!e.data.isAtivo}).pipe(Object(f.a)((function(){}))).subscribe((function(t){h.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}).fire({icon:"success",title:"O usu\xe1rio "+e.data.nome+" "+i+" com sucesso"}),n.getAlunos()}))}}},{key:"onCustomAction",value:function(e,t){"status"==e.action?this.onDeleteConfirm(e,t):"edit"==e.action&&this.router.navigateByUrl("/instituicao/usuarios/alunos/editar/"+e.data.id)}}]),e}()).\u0275fac=function(e){return new(e||o)(b.Rb(m.a),b.Rb(v.a),b.Rb(l.c))},o.\u0275cmp=b.Lb({type:o,selectors:[["alunos"]],decls:15,vars:4,consts:[[1,"row"],[1,"col-md-5"],[1,"col-md-5","ml-auto","text-right"],["nbInput","","type","text","placeholder","Buscar",1,"search",3,"keydown.enter"],["search",""],["tabTitle","Ativos"],[3,"settings","source","custom"],["tabTitle","Inativos"]],template:function(e,t){if(1&e){var n=b.Yb();b.Xb(0,"nb-card"),b.Xb(1,"nb-card-header"),b.Xb(2,"div",0),b.Xb(3,"div",1),b.Xb(4,"h4"),b.Gc(5,"Alunos"),b.Wb(),b.Wb(),b.Xb(6,"div",2),b.Xb(7,"input",3,4),b.fc("keydown.enter",(function(){b.wc(n);var e=b.uc(8);return t.onSearch(e.value)})),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(9,"nb-card-body"),b.Xb(10,"nb-tabset"),b.Xb(11,"nb-tab",5),b.Xb(12,"ng2-smart-table",6),b.fc("custom",(function(e){return t.onCustomAction(e,"source1")})),b.Wb(),b.Wb(),b.Xb(13,"nb-tab",7),b.Xb(14,"ng2-smart-table",6),b.fc("custom",(function(e){return t.onCustomAction(e,"source2")})),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()}2&e&&(b.Eb(12),b.nc("settings",t.settings1)("source",t.source),b.Eb(2),b.nc("settings",t.settings2)("source",t.source2))},directives:[r.x,r.z,r.L,r.w,r.pb,r.ob,c.b],styles:["[_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{padding-left:0;padding-right:0}"]}),o),W=n("ofXK");function X(e,t){1&e&&(b.Xb(0,"div",6),b.Gc(1,"Voc\xea precisa cadastrar uma "),b.Xb(2,"a",22),b.Gc(3,"turma"),b.Wb(),b.Wb())}function A(e,t){if(1&e&&(b.Xb(0,"nb-option",25),b.Gc(1),b.Wb()),2&e){var n=t.$implicit;b.nc("value",n.id),b.Eb(1),b.Ic(" ",n.nome,"")}}function C(e,t){if(1&e){var n=b.Yb();b.Xb(0,"div",6),b.Xb(1,"nb-select",23),b.fc("selectedChange",(function(e){return b.wc(n),b.hc().selectedItem=e})),b.Ec(2,A,2,2,"nb-option",24),b.Wb(),b.Wb()}if(2&e){var i=b.hc();b.Eb(1),b.nc("selected",i.selectedItem),b.Eb(1),b.nc("ngForOf",i.turmas)}}function S(e,t){if(1&e&&(b.Xb(0,"nb-option",22),b.Gc(1),b.Wb()),2&e){var n=t.$implicit;b.nc("value",n.id),b.Eb(1),b.Ic(" ",n.nome,"")}}function k(e,t){if(1&e){var n=b.Yb();b.Xb(0,"nb-card-body"),b.Xb(1,"form",4),b.fc("ngSubmit",(function(){return b.wc(n),b.hc().submit()})),b.Xb(2,"div",5),b.Xb(3,"label",6),b.Gc(4,"Nome"),b.Wb(),b.Xb(5,"div",7),b.Sb(6,"input",8),b.Wb(),b.Wb(),b.Xb(7,"div",5),b.Xb(8,"label",9),b.Gc(9,"Turma"),b.Wb(),b.Xb(10,"div",7),b.Xb(11,"nb-select",10),b.fc("selectedChange",(function(e){return b.wc(n),b.hc().turmaChange(e)})),b.Ec(12,S,2,2,"nb-option",11),b.Wb(),b.Wb(),b.Wb(),b.Xb(13,"div",5),b.Xb(14,"label",12),b.Gc(15,"CPF"),b.Wb(),b.Xb(16,"div",7),b.Sb(17,"input",13),b.Wb(),b.Wb(),b.Xb(18,"div",5),b.Xb(19,"label",14),b.Gc(20,"E-mail"),b.Wb(),b.Xb(21,"div",7),b.Sb(22,"input",15),b.Wb(),b.Wb(),b.Xb(23,"div",16),b.Xb(24,"label",17),b.Gc(25,"Telefone para Contato"),b.Wb(),b.Xb(26,"div",7),b.Sb(27,"input",18),b.Sb(28,"input",19),b.Wb(),b.Wb(),b.Xb(29,"div",5),b.Xb(30,"div",20),b.Xb(31,"button",21),b.Gc(32,"Atualizar"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()}if(2&e){var i=b.hc();b.Eb(1),b.nc("formGroup",i.form),b.Eb(11),b.nc("ngForOf",i.turmas),b.Eb(11),b.nc("formGroup",i.phones),b.Eb(8),b.nc("disabled",i.form.invalid||i.isLoading)}}var I,w,N,E=[{path:"",component:d,children:[{path:"",redirectTo:"listar",pathMatch:"full"},{path:"listar",component:y},{path:"adicionar",component:(w=function(){function e(t,n,i){_classCallCheck(this,e),this.formBuilder=t,this.InstituicaoService=n,this.router=i,this.isLoading=!0,this.turmas=[],this.ngrupo=[],this.idgrupo=[],this.phonelist=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.getTurmas(),this.createForm()}},{key:"getTurmas",value:function(){var e=this;this.InstituicaoService.getTurmas().subscribe((function(t){e.isLoading=!1,t.forEach((function(t){t.series.forEach((function(t){t.turmas.forEach((function(t){e.turmas.push(t)}))}))}))}))}},{key:"createForm",value:function(){this.form=this.formBuilder.group({nome:["",s.A.required],perfil:["Aluno"],turma:["",s.A.required],email:["",[s.A.required,s.A.email]],cpf:["",[s.A.required,s.A.minLength(11),s.A.maxLength(11)]],dataNascimento:["",s.A.required],phones:this.formBuilder.group({ddd:["",s.A.required],phoneNumber:["",s.A.required]})})}},{key:"Adicionar",value:function(){var e=this;this.isLoading=!0;var t=Object.assign({},this.form.value);this.InstituicaoService.inserirAluno(t).pipe(Object(f.a)((function(){e.isLoading=!1}))).subscribe((function(t){e.isLoading=!1,t&&(h.a.fire("Ok","Aluno adicionada com sucesso","success"),e.router.navigateByUrl("/instituicao/usuarios/alunos"))}))}},{key:"phones",get:function(){return this.form.get("phones")}}]),e}(),w.\u0275fac=function(e){return new(e||w)(b.Rb(s.d),b.Rb(m.a),b.Rb(l.c))},w.\u0275cmp=b.Lb({type:w,selectors:[["alunos-adicionar"]],decls:43,vars:6,consts:[["nbSpinnerStatus","primary","nbSpinnerSize","large","nbSpinnerMessage","",3,"nbSpinner"],[1,"row"],[1,"col-md-5"],["action","",3,"formGroup"],[1,"form-group","row"],["for","nome",1,"label","col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","nbInput","","fullWidth","","id","nome","placeholder","Nome","formControlName","nome"],["for","turma",1,"label","col-sm-2","col-form-label"],["class","col-sm-10",4,"ngIf"],["for","cpf",1,"label","col-sm-2","col-form-label"],["type","text","nbInput","","fullWidth","","id","cpf","placeholder","CPF","formControlName","cpf","mask","000.000.000-00"],["for","email",1,"label","col-sm-2","col-form-label"],["type","email","nbInput","","fullWidth","","id","email","placeholder","E-mail","formControlName","email"],["for","dataNascimento",1,"label","col-sm-2","col-form-label"],["type","text","nbInput","","fullWidth","","id","dataNascimento","placeholder","Data de Nascimento","formControlName","dataNascimento","mask","00/00/0000"],[1,"form-group","row",3,"formGroup"],["for","phone",1,"label","col-sm-2","col-form-label"],["type","text","nbInput","","id","ddd","placeholder","(00)","formControlName","ddd","mask","(00)"],["type","text","nbInput","","id","phoneNumber","placeholder","0.0000-0000","formControlName","phoneNumber","mask","0.0000-0000"],[1,"offset-sm-2","col-sm-10"],["type","submit","nbButton","","status","primary",3,"disabled","click"],["routerLink","/instituicao/turmas/cadastrar"],["fullWidth","","id","turma","placeholder","Selecione uma Turma","formControlName","turma",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(b.Xb(0,"nb-card",0),b.Xb(1,"nb-card-header"),b.Xb(2,"div",1),b.Xb(3,"div",2),b.Xb(4,"h4"),b.Gc(5,"Adicionar Aluno"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(6,"nb-card-body"),b.Xb(7,"form",3),b.Xb(8,"div",4),b.Xb(9,"label",5),b.Gc(10,"Nome"),b.Wb(),b.Xb(11,"div",6),b.Sb(12,"input",7),b.Wb(),b.Wb(),b.Xb(13,"div",4),b.Xb(14,"label",8),b.Gc(15,"Turma"),b.Wb(),b.Ec(16,X,4,0,"div",9),b.Ec(17,C,3,2,"div",9),b.Wb(),b.Xb(18,"div",4),b.Xb(19,"label",10),b.Gc(20,"CPF"),b.Wb(),b.Xb(21,"div",6),b.Sb(22,"input",11),b.Wb(),b.Wb(),b.Xb(23,"div",4),b.Xb(24,"label",12),b.Gc(25,"E-mail"),b.Wb(),b.Xb(26,"div",6),b.Sb(27,"input",13),b.Wb(),b.Wb(),b.Xb(28,"div",4),b.Xb(29,"label",14),b.Gc(30,"Data de Nascimento"),b.Wb(),b.Xb(31,"div",6),b.Sb(32,"input",15),b.Wb(),b.Wb(),b.Xb(33,"div",16),b.Xb(34,"label",17),b.Gc(35,"Telefone para Contato"),b.Wb(),b.Xb(36,"div",6),b.Sb(37,"input",18),b.Sb(38,"input",19),b.Wb(),b.Wb(),b.Xb(39,"div",4),b.Xb(40,"div",20),b.Xb(41,"button",21),b.fc("click",(function(){return t.Adicionar()})),b.Gc(42,"Adicionar"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()),2&e&&(b.nc("nbSpinner",t.isLoading),b.Eb(7),b.nc("formGroup",t.form),b.Eb(9),b.nc("ngIf",0==t.turmas.length),b.Eb(1),b.nc("ngIf",t.turmas&&t.turmas.length>0),b.Eb(16),b.nc("formGroup",t.phones),b.Eb(8),b.nc("disabled",t.form.invalid||t.isLoading))},directives:[r.x,r.lb,r.z,r.w,s.C,s.q,s.h,r.L,s.b,s.p,s.g,W.m,a.a,r.s,l.f,r.gb,W.l,r.bb],styles:[""]}),w)},{path:"editar/:id",component:(I=function(){function e(t,n,i,o){_classCallCheck(this,e),this.route=t,this.formBuilder=n,this.InstituicaoService=i,this.router=o,this.isLoading=!0,this.turmas=[],this.aluno={},this.inserirAlunoTurma=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.getTurmas(),this.route.paramMap.subscribe((function(t){e.id=t.get("id"),e.createForm()}))}},{key:"getTurmas",value:function(){var e=this;this.InstituicaoService.getTurmas().subscribe((function(t){t.forEach((function(t){t.series.forEach((function(t){t.turmas.forEach((function(t){e.turmas.push(t)}))}))}))}))}},{key:"turmaChange",value:function(e){this.inserirAlunoTurma=!0}},{key:"createForm",value:function(){var e=this;this.InstituicaoService.getUserId(this.id).subscribe((function(t){e.isLoading=!1,e.aluno=t;var n=e.aluno;e.form=e.formBuilder.group({id:[n.id],nome:[n.nome,s.A.required],perfil:["Aluno"],turma:[n.turmas[0]?n.turmas[0].id:""],email:[n.email,s.A.required],cpf:[n.cpf,s.A.required],phones:e.formBuilder.group({ddd:[n.phones[0]?n.phones[0].ddd:"",s.A.required],phoneNumber:[n.phones[0]?n.phones[0].phoneNumber:"",s.A.required]})})}))}},{key:"submit",value:function(){var e=this;this.isLoading=!0;var t=Object.assign({},this.form.value);this.InstituicaoService.editarAluno(t).pipe(Object(f.a)((function(){e.isLoading=!1}))).subscribe((function(t){if(e.inserirAlunoTurma)return e.inserirAlunoNaTurma(),!1;e.isLoading=!1,t&&e.msgSuccesso()}))}},{key:"inserirAlunoNaTurma",value:function(){var e=this;this.isLoading=!0;var t=Object.assign({},this.form.value);this.InstituicaoService.inserirAlunoNaTurma(t).pipe(Object(f.a)((function(){e.isLoading=!1}))).subscribe((function(t){e.isLoading=!1,t&&e.msgSuccesso()}))}},{key:"msgSuccesso",value:function(){h.a.fire("Ok","Aluno atualizado com sucesso","success"),this.router.navigateByUrl("/instituicao/usuarios/alunos")}},{key:"phones",get:function(){return this.form.get("phones")}}]),e}(),I.\u0275fac=function(e){return new(e||I)(b.Rb(l.a),b.Rb(s.d),b.Rb(m.a),b.Rb(l.c))},I.\u0275cmp=b.Lb({type:I,selectors:[["alunos-editar"]],decls:7,vars:2,consts:[["nbSpinnerStatus","primary","nbSpinnerSize","large","nbSpinnerMessage","",3,"nbSpinner"],[1,"row"],[1,"col-md-5"],[4,"ngIf"],["action","",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","nome",1,"label","col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","nbInput","","fullWidth","","id","nome","placeholder","Nome","formControlName","nome"],["for","turma",1,"label","col-sm-2","col-form-label"],["fullWidth","","id","turma","placeholder","Selecione uma Turma","formControlName","turma",3,"selectedChange"],[3,"value",4,"ngFor","ngForOf"],["for","cpf",1,"label","col-sm-2","col-form-label"],["type","text","nbInput","","fullWidth","","id","cpf","placeholder","CPF","formControlName","cpf","mask","000.000.000-00"],["for","email",1,"label","col-sm-2","col-form-label"],["type","email","nbInput","","fullWidth","","id","email","placeholder","E-mail","formControlName","email"],[1,"form-group","row",3,"formGroup"],["for","phone",1,"label","col-sm-2","col-form-label"],["type","text","nbInput","","id","ddd","placeholder","(00)","formControlName","ddd","mask","(00)"],["type","text","nbInput","","id","phoneNumber","placeholder","0.0000-0000","formControlName","phoneNumber","mask","0.0000-0000"],[1,"offset-sm-2","col-sm-10"],["type","submit","nbButton","","status","primary",3,"disabled"],[3,"value"]],template:function(e,t){1&e&&(b.Xb(0,"nb-card",0),b.Xb(1,"nb-card-header"),b.Xb(2,"div",1),b.Xb(3,"div",2),b.Xb(4,"h4"),b.Gc(5,"Editar dados do Aluno"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Ec(6,k,33,4,"nb-card-body",3),b.Wb()),2&e&&(b.nc("nbSpinner",t.isLoading),b.Eb(6),b.nc("ngIf",t.form&&t.aluno))},directives:[r.x,r.lb,r.z,W.m,r.w,s.C,s.q,s.h,r.L,s.b,s.p,s.g,r.gb,W.l,a.a,r.s,r.bb],styles:[""]}),I)}]}],T=((N=function e(){_classCallCheck(this,e)}).\u0275mod=b.Pb({type:N}),N.\u0275inj=b.Ob({factory:function(e){return new(e||N)},imports:[[l.g.forChild(E)],l.g]}),N);n.d(t,"AlunosModule",(function(){return L}));var O,L=((O=function e(){_classCallCheck(this,e)}).\u0275mod=b.Pb({type:O}),O.\u0275inj=b.Ob({factory:function(e){return new(e||O)},imports:[[r.A,r.vb,r.K,r.M,r.n,r.D,r.G,r.eb,r.hb,r.xb,u.a,r.t,T,c.c,s.x,a.b,r.mb,r.qb]]}),O)}}]);