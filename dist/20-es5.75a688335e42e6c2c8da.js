function _defineProperties(e,i){for(var t=0;t<i.length;t++){var r=i[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,i,t){return i&&_defineProperties(e.prototype,i),t&&_defineProperties(e,t),e}function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{l2oJ:function(e,i,t){"use strict";t.r(i);var r,n=t("aceb"),o=t("tmjD"),s=t("3Pt+"),a=t("RS3s"),c=t("vTDv"),l=t("tyNb"),b=t("fXoL"),u=((r=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b.Lb({type:r,selectors:[["materiais"]],decls:1,vars:0,template:function(e,i){1&e&&b.Sb(0,"router-outlet")},directives:[l.h],encapsulation:2}),r),d=t("sRfN"),f=t("OE9b"),m=t("nYR2"),p=t("ofXK");function h(e,i){if(1&e&&(b.Xb(0,"nb-option",12),b.Gc(1),b.Wb()),2&e){var t=i.$implicit;b.nc("value",t.idProfessorDisciplina),b.Eb(1),b.Ic(" ",t.nome,"")}}function v(e,i){if(1&e&&(b.Xb(0,"nb-option",12),b.Gc(1),b.Wb()),2&e){var t=i.$implicit;b.nc("value",t.id),b.Eb(1),b.Hc(t.nome)}}var g,W=((g=function(){function e(i,t,r){_classCallCheck(this,e),this.service=i,this.ProfessorService=t,this.router=r,this.isLoading=!0,this.turmas=[],this.turmasFiltered=[],this.disciplinas=[],this.settings={hideSubHeader:!0,actions:{position:"right",columnTitle:"A\xe7\xf5es",add:!1,edit:!1,delete:!1,custom:[{name:"delete",title:'<i class="nb-trash"></i>'}]},add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmSave:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{nome:{title:"Nome",type:"string",editable:!1},descricao:{title:"Descri\xe7\xe3o",type:"string",editable:!1},url:{title:"Link",type:"string",editable:!1}}},this.source=new a.a}return _createClass(e,[{key:"ngOnInit",value:function(){this.getDisciplinas(),this.getTurmasProfessor()}},{key:"getTurmasProfessor",value:function(){var e=this;this.ProfessorService.getTurmas().subscribe((function(i){e.isLoading=!1,e.turmas=i}))}},{key:"getDisciplinas",value:function(){this.disciplinas=this.ProfessorService.professorDetalhe.disciplinas}},{key:"filtrarTurma",value:function(e){this.turmasFiltered=this.turmas.filter((function(i){return i.disciplinas.some((function(i){return i.idProfessorDisciplina==e}))}))}},{key:"getMateriais",value:function(e,i){var t=this;this.ProfessorService.getMateriais(e,i).pipe(Object(m.a)((function(){}))).subscribe((function(e){console.log(e),t.source.load(e),t.source.refresh()}))}},{key:"onSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""!=e?this.source.setFilter([{field:"id",search:e},{field:"nome",search:e},{field:"descricao",search:e},{field:"onboardStatus",search:e}],!1):this.source.reset()}},{key:"onCustomAction",value:function(e){"edit"==e.action?this.router.navigateByUrl("/instituicao/disciplinas/editar/"+e.data._id):"delete"==e.action&&this.onDeleteConfirm(e)}},{key:"onDeleteConfirm",value:function(e){var i=this;console.log(e),window.confirm("Tem certeza que deseja rejeitar a aprova\xe7\xe3o deste usu\xe1rio?")&&this.ProfessorService.deletarMaterial(e.data._id).pipe(Object(m.a)((function(){}))).subscribe((function(e){i.getMateriais(i.selectedDisciplina,i.selectedTurma)}))}},{key:"onEditConfirm",value:function(e){console.log(e)}}]),e}()).\u0275fac=function(e){return new(e||g)(b.Rb(d.a),b.Rb(f.a),b.Rb(l.c))},g.\u0275cmp=b.Lb({type:g,selectors:[["materiais-listar"]],decls:17,vars:7,consts:[["nbSpinnerStatus","primary","nbSpinnerSize","large","nbSpinnerMessage","Carregando",3,"nbSpinner"],[1,"d-flex"],[1,""],[1,"ml-auto","text-right","d-flex"],["placeholder","Selecione uma disciplina","filled","","status","primary",1,"mr-4",3,"selected","selectedChange"],["disciplinaSelect",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","Selecione uma turma","filled","","status","primary",1,"mr-4",3,"selected","selectedChange"],["turmaSelect",""],["nbInput","","type","text","placeholder","Search...",1,"search",3,"keydown.enter"],["search",""],[3,"settings","source","deleteConfirm","custom","editConfirm"],[3,"value"]],template:function(e,i){if(1&e){var t=b.Yb();b.Xb(0,"nb-card",0),b.Xb(1,"nb-card-header"),b.Xb(2,"div",1),b.Xb(3,"div",2),b.Xb(4,"h4"),b.Gc(5,"Materiais"),b.Wb(),b.Wb(),b.Xb(6,"div",3),b.Xb(7,"nb-select",4,5),b.fc("selectedChange",(function(e){return i.selectedDisciplina=e}))("selectedChange",(function(){return i.filtrarTurma(i.selectedDisciplina)})),b.Ec(9,h,2,2,"nb-option",6),b.Wb(),b.Xb(10,"nb-select",7,8),b.fc("selectedChange",(function(e){return i.selectedTurma=e}))("selectedChange",(function(){return i.getMateriais(i.selectedDisciplina,i.selectedTurma)})),b.Ec(12,v,2,2,"nb-option",6),b.Wb(),b.Xb(13,"input",9,10),b.fc("keydown.enter",(function(){b.wc(t);var e=b.uc(14);return i.onSearch(e.value)})),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(15,"nb-card-body"),b.Xb(16,"ng2-smart-table",11),b.fc("deleteConfirm",(function(e){return i.onDeleteConfirm(e)}))("custom",(function(e){return i.onCustomAction(e)}))("editConfirm",(function(e){return i.onEditConfirm(e)})),b.Wb(),b.Wb(),b.Wb()}2&e&&(b.nc("nbSpinner",i.isLoading),b.Eb(7),b.nc("selected",i.selectedDisciplina),b.Eb(2),b.nc("ngForOf",i.disciplinas),b.Eb(1),b.nc("selected",i.selectedTurma),b.Eb(2),b.nc("ngForOf",i.turmasFiltered),b.Eb(4),b.nc("settings",i.settings)("source",i.source))},directives:[n.x,n.lb,n.z,n.gb,p.l,n.L,n.w,a.b,n.bb],styles:[""]}),g),X=t("PSD3"),y=t.n(X);function C(e,i){if(1&e&&(b.Xb(0,"nb-option",23),b.Gc(1),b.Wb()),2&e){var t=i.$implicit;b.nc("value",t.idProfessorDisciplina),b.Eb(1),b.Ic(" ",t.nome," ")}}function S(e,i){if(1&e&&(b.Xb(0,"nb-option",23),b.Gc(1),b.Wb()),2&e){var t=i.$implicit;b.nc("value",t.id),b.Eb(1),b.Hc(t.nome)}}function k(e,i){1&e&&(b.Xb(0,"div",4),b.Xb(1,"label",24),b.Gc(2,"Url"),b.Wb(),b.Xb(3,"div",16),b.Sb(4,"input",25),b.Wb(),b.Wb())}function w(e,i){if(1&e){var t=b.Yb();b.Xb(0,"div",4),b.Xb(1,"label",24),b.Gc(2,"Arquivo"),b.Wb(),b.Xb(3,"div",16),b.Xb(4,"input",26),b.fc("change",(function(e){return b.wc(t),b.hc().fileChange(e)})),b.Wb(),b.Wb(),b.Wb()}}var D,P,E,G=[{path:"",component:u,children:[{path:"",redirectTo:"listar",pathMatch:"full"},{path:"listar",component:W},{path:"editar/:_id",component:(P=function(){function e(i,t,r,n){_classCallCheck(this,e),this.route=i,this.formBuilder=t,this.ProfessorService=r,this.router=n,this.isLoading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(i){e.id=i.get("_id")}))}},{key:"submit",value:function(){var e=this;this.isLoading=!0;var i=Object.assign({},this.form.value);this.ProfessorService.editarMateriais(i).pipe(Object(m.a)((function(){e.isLoading=!1}))).subscribe((function(i){e.isLoading=!1,i&&(y.a.fire("Ok","Disciplina atualizada com sucesso","success"),e.router.navigateByUrl("/professor/materiais/listar"))}))}}]),e}(),P.\u0275fac=function(e){return new(e||P)(b.Rb(l.a),b.Rb(s.d),b.Rb(f.a),b.Rb(l.c))},P.\u0275cmp=b.Lb({type:P,selectors:[["materiais-editar"]],decls:22,vars:3,consts:[["nbSpinnerStatus","primary","nbSpinnerSize","large","nbSpinnerMessage","",3,"nbSpinner"],[1,"row"],[1,"col-md-5"],["action","",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","nome",1,"label","col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","nbInput","","fullWidth","","id","nome","placeholder","Nome","formControlName","nome"],["for","descricao",1,"label","col-sm-2","col-form-label"],["type","text","nbInput","","fullWidth","","id","descricao","placeholder","Descri\xe7\xe3o","formControlName","descricao"],[1,"offset-sm-2","col-sm-10"],["type","submit","nbButton","","status","primary",3,"disabled"]],template:function(e,i){1&e&&(b.Xb(0,"nb-card",0),b.Xb(1,"nb-card-header"),b.Xb(2,"div",1),b.Xb(3,"div",2),b.Xb(4,"h4"),b.Gc(5,"Editar Materiais"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(6,"nb-card-body"),b.Xb(7,"form",3),b.fc("ngSubmit",(function(){return i.submit()})),b.Xb(8,"div",4),b.Xb(9,"label",5),b.Gc(10,"Nome"),b.Wb(),b.Xb(11,"div",6),b.Sb(12,"input",7),b.Wb(),b.Wb(),b.Xb(13,"div",4),b.Xb(14,"label",8),b.Gc(15,"Descri\xe7\xe3o"),b.Wb(),b.Xb(16,"div",6),b.Sb(17,"input",9),b.Wb(),b.Wb(),b.Xb(18,"div",4),b.Xb(19,"div",10),b.Xb(20,"button",11),b.Gc(21,"Atualizar"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()),2&e&&(b.nc("nbSpinner",i.isLoading),b.Eb(7),b.nc("formGroup",i.form),b.Eb(13),b.nc("disabled",i.form.invalid||i.isLoading))},directives:[n.x,n.lb,n.z,n.w,s.C,s.q,s.h,n.L,s.b,s.p,s.g,n.s],styles:[""]}),P)},{path:"cadastrar",component:(D=function(){function e(i,t,r){_classCallCheck(this,e),this.formBuilder=i,this.ProfessorService=t,this.router=r,this.isLoading=!1,this.turmas=[],this.turmasFiltered=[],this.disciplinas=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.getTurmasProfessor(),this.getDetalhesProfessor(),this.createForm(),this.form.get("disciplinas").valueChanges.subscribe((function(i){e.turmasFiltered=e.turmas.filter((function(e){return e.disciplinas.some((function(e){return e.idProfessorDisciplina==i}))}))}))}},{key:"getTurmasProfessor",value:function(){var e=this;this.ProfessorService.getTurmas().subscribe((function(i){e.isLoading=!1,e.turmas=i}))}},{key:"getDetalhesProfessor",value:function(){var e=this;this.ProfessorService.getProfessorDetalhes().subscribe((function(i){e.isLoading=!1,e.disciplinas=i.disciplinas}))}},{key:"fileChange",value:function(e){this.form.patchValue({fileSource:e.target.files[0]})}},{key:"createForm",value:function(){this.form=this.formBuilder.group({turma:["",s.A.required],disciplinas:["",s.A.required],tipo_material:["",s.A.required],file:[""],fileSource:[""],material:this.formBuilder.group({nome:["",s.A.required],descricao:["",s.A.required],url:[""]})})}},{key:"submit",value:function(){var e=this;this.isLoading=!0;var i=Object.assign({},this.form.value);this.ProfessorService.inserirMateriais(i).pipe(Object(m.a)((function(){e.isLoading=!1}))).subscribe((function(i){e.isLoading=!1,i&&(y.a.fire("Ok","Material adicionado com sucesso","success"),e.router.navigateByUrl("/professor/materiais"))}))}},{key:"material",get:function(){return this.form.get("material")}}]),e}(),D.\u0275fac=function(e){return new(e||D)(b.Rb(s.d),b.Rb(f.a),b.Rb(l.c))},D.\u0275cmp=b.Lb({type:D,selectors:[["materiais-cadastrar"]],decls:46,vars:8,consts:[["nbSpinnerStatus","primary","nbSpinnerSize","large","nbSpinnerMessage","",3,"nbSpinner"],[1,"row"],[1,"col-md-5"],["action","",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","disciplinas",1,"label","col-sm-2","col-form-label"],[1,"col-sm-10","d-flex"],["multiple","","placeholder","Selecione a disciplina","id","disciplinas","formControlName","disciplinas"],[3,"value",4,"ngFor","ngForOf"],["for","turmas",1,"label","col-sm-2","col-form-label"],["placeholder","Selecione as turmas","id","turma","formControlName","turma"],["placeholder","Selecione o tipo de material","id","tipo_material","formControlName","tipo_material"],["value","arquivo"],["value","url"],[3,"formGroup"],["for","nome",1,"label","col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","nbInput","","id","nome","placeholder","Nome","formControlName","nome"],["for","descricao",1,"label","col-sm-2","col-form-label"],["type","text","nbInput","","id","descricao","placeholder","Descri\xe7\xe3o","formControlName","descricao"],["class","form-group row",4,"ngIf"],[1,"offset-sm-2","col-sm-10"],["type","submit","nbButton","","status","primary",3,"disabled"],[3,"value"],["for","url",1,"label","col-sm-2","col-form-label"],["type","text","nbInput","","fullWidth","","id","url","placeholder","Url","formControlName","url"],["type","file","nbInput","","fullWidth","","id","url","placeholder","Arquivo","formControlName","file",3,"change"]],template:function(e,i){1&e&&(b.Xb(0,"nb-card",0),b.Xb(1,"nb-card-header"),b.Xb(2,"div",1),b.Xb(3,"div",2),b.Xb(4,"h4"),b.Gc(5,"Adicionar Material"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(6,"nb-card-body"),b.Xb(7,"form",3),b.fc("ngSubmit",(function(){return i.submit()})),b.Xb(8,"div",4),b.Xb(9,"label",5),b.Gc(10,"Disciplina"),b.Wb(),b.Xb(11,"div",6),b.Xb(12,"nb-select",7),b.Ec(13,C,2,2,"nb-option",8),b.Wb(),b.Wb(),b.Wb(),b.Xb(14,"div",4),b.Xb(15,"label",9),b.Gc(16,"Turma"),b.Wb(),b.Xb(17,"div",6),b.Xb(18,"nb-select",10),b.Ec(19,S,2,2,"nb-option",8),b.Wb(),b.Wb(),b.Wb(),b.Xb(20,"div",4),b.Xb(21,"label",5),b.Gc(22,"Tipo de material"),b.Wb(),b.Xb(23,"div",6),b.Xb(24,"nb-select",11),b.Xb(25,"nb-option",12),b.Gc(26," Arquivo "),b.Wb(),b.Xb(27,"nb-option",13),b.Gc(28," Url "),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(29,"div",14),b.Xb(30,"div",4),b.Xb(31,"label",15),b.Gc(32,"T\xedtulo"),b.Wb(),b.Xb(33,"div",16),b.Sb(34,"input",17),b.Wb(),b.Wb(),b.Xb(35,"div",4),b.Xb(36,"label",18),b.Gc(37,"Descri\xe7\xe3o"),b.Wb(),b.Xb(38,"div",16),b.Sb(39,"input",19),b.Wb(),b.Wb(),b.Ec(40,k,5,0,"div",20),b.Wb(),b.Ec(41,w,5,0,"div",20),b.Xb(42,"div",4),b.Xb(43,"div",21),b.Xb(44,"button",22),b.Gc(45,"Adicionar"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()),2&e&&(b.nc("nbSpinner",i.isLoading),b.Eb(7),b.nc("formGroup",i.form),b.Eb(6),b.nc("ngForOf",i.disciplinas),b.Eb(6),b.nc("ngForOf",i.turmas),b.Eb(10),b.nc("formGroup",i.material),b.Eb(11),b.nc("ngIf","url"==i.form.controls.tipo_material.value),b.Eb(1),b.nc("ngIf","arquivo"==i.form.controls.tipo_material.value),b.Eb(3),b.nc("disabled",i.form.invalid||i.isLoading||!i.form.controls.file.value&&i.form.controls.material.value&&i.form.controls.url.value||!i.form.controls.material.value&&i.form.controls.url.value&&i.form.controls.file.value))},directives:[n.x,n.lb,n.z,n.w,s.C,s.q,s.h,n.gb,s.p,s.g,p.l,n.bb,n.L,s.b,p.m,n.s],styles:[""]}),D)}]}],L=((E=function e(){_classCallCheck(this,e)}).\u0275mod=b.Pb({type:E}),E.\u0275inj=b.Ob({factory:function(e){return new(e||E)},imports:[[l.g.forChild(G)],l.g]}),E);t.d(i,"MateriaisModule",(function(){return O}));var _,O=((_=function e(){_classCallCheck(this,e)}).\u0275mod=b.Pb({type:_}),_.\u0275inj=b.Ob({factory:function(e){return new(e||_)},imports:[[n.A,n.vb,n.K,n.M,n.n,n.D,n.G,n.eb,n.hb,n.xb,c.a,n.t,L,a.c,s.x,o.b,n.mb]]}),_)}}]);