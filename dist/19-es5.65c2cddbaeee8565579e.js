function _toConsumableArray(i){return _arrayWithoutHoles(i)||_iterableToArray(i)||_unsupportedIterableToArray(i)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(i,e){if(i){if("string"==typeof i)return _arrayLikeToArray(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);return"Object"===t&&i.constructor&&(t=i.constructor.name),"Map"===t||"Set"===t?Array.from(i):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(i,e):void 0}}function _iterableToArray(i){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(i))return Array.from(i)}function _arrayWithoutHoles(i){if(Array.isArray(i))return _arrayLikeToArray(i)}function _arrayLikeToArray(i,e){(null==e||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function _defineProperties(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function _createClass(i,e,t){return e&&_defineProperties(i.prototype,e),t&&_defineProperties(i,t),i}function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{ypFQ:function(i,e,t){"use strict";t.r(e);var n,r,o=t("aceb"),s=t("tmjD"),a=t("3Pt+"),c=t("RS3s"),l=t("vTDv"),u=t("tyNb"),b=t("fXoL"),f=((n=function i(){_classCallCheck(this,i)}).\u0275fac=function(i){return new(i||n)},n.\u0275cmp=b.Lb({type:n,selectors:[["professores"]],decls:1,vars:0,template:function(i,e){1&i&&b.Sb(0,"router-outlet")},directives:[u.h],encapsulation:2}),n),d=t("Mw0X"),m=t("nYR2"),p=t("FIB3"),h=t("PSD3"),v=t.n(h),g=((r=function(){function i(e,t,n){_classCallCheck(this,i),this.InstituicaoService=e,this.UsuarioService=t,this.router=n,this.settingsDefault={hideSubHeader:!0,noDataMessage:"N\xe3o h\xe1 nenhum dado para exibir",actions:{add:!1,position:"right",columnTitle:"A\xe7\xf5es",edit:!1,delete:!1,custom:[{name:"edit",title:'<i class="nb-edit"></i>'}]},add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmSave:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{nome:{title:"Nome",type:"string",editable:!0},perfil:{title:"Perfil",type:"string",editable:!1},cpf:{title:"CPF",type:"string",editable:!1},email:{title:"E-mail",type:"string",editable:!1}}},this.settings1=Object.assign(Object.assign({},this.settingsDefault),{actions:Object.assign(Object.assign({},this.settingsDefault.actions),{custom:[].concat(_toConsumableArray(this.settingsDefault.actions.custom),[{name:"status",title:'<i class="nb-trash" title="Desativar usu\xe1rio"></i>'}])})}),this.settings2=Object.assign(Object.assign({},this.settingsDefault),{actions:Object.assign(Object.assign({},this.settingsDefault.actions),{custom:[].concat(_toConsumableArray(this.settingsDefault.actions.custom),[{name:"status",title:'<i class="nb-loop" title="Ativar usu\xe1rio"></i>'}])})}),this.source=new c.a,this.source2=new c.a,this.getProfessores()}return _createClass(i,[{key:"getProfessores",value:function(){var i=this;this.InstituicaoService.getProfessores().pipe(Object(m.a)((function(){}))).subscribe((function(e){var t=e.filter((function(i){return i.isAtivo})),n=e.filter((function(i){return!i.isAtivo}));i.source.load(t),i.source2.load(n),i.source.refresh(),i.source2.refresh()}))}},{key:"onSearch",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""!=i?this.source.setFilter([{field:"id",search:i},{field:"name",search:i},{field:"perfil",search:i},{field:"cpf",search:i}],!1):this.source.reset()}},{key:"onDeleteConfirm",value:function(i,e){var t=this;if(window.confirm("Tem certeza que deseja "+(i.data.isAtivo?"desativar":"ativar")+" este usu\xe1rio?")){var n="";"source1"==e?n="desativado":"source2"==e&&(n="ativado"),this.UsuarioService.deleteUser({id:i.data.id,status:!i.data.isAtivo}).pipe(Object(m.a)((function(){}))).subscribe((function(e){v.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}).fire({icon:"success",title:"O usu\xe1rio "+i.data.nome+" "+n+" com sucesso"}),t.getProfessores()}))}}},{key:"onCustomAction",value:function(i,e){"status"==i.action?this.onDeleteConfirm(i,e):"edit"==i.action&&this.router.navigateByUrl("/instituicao/usuarios/professores/adicionar/"+i.data.id)}}]),i}()).\u0275fac=function(i){return new(i||r)(b.Rb(d.a),b.Rb(p.a),b.Rb(u.c))},r.\u0275cmp=b.Lb({type:r,selectors:[["professores-listar"]],decls:15,vars:4,consts:[[1,"row"],[1,"col-md-5"],[1,"col-md-5","ml-auto","text-right"],["nbInput","","type","text","placeholder","Buscar",1,"search",3,"keydown.enter"],["search",""],["tabTitle","Ativos"],[3,"settings","source","custom"],["tabTitle","Inativos"]],template:function(i,e){if(1&i){var t=b.Yb();b.Xb(0,"nb-card"),b.Xb(1,"nb-card-header"),b.Xb(2,"div",0),b.Xb(3,"div",1),b.Xb(4,"h4"),b.Gc(5,"Professores"),b.Wb(),b.Wb(),b.Xb(6,"div",2),b.Xb(7,"input",3,4),b.fc("keydown.enter",(function(){b.wc(t);var i=b.uc(8);return e.onSearch(i.value)})),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(9,"nb-card-body"),b.Xb(10,"nb-tabset"),b.Xb(11,"nb-tab",5),b.Xb(12,"ng2-smart-table",6),b.fc("custom",(function(i){return e.onCustomAction(i,"source1")})),b.Wb(),b.Wb(),b.Xb(13,"nb-tab",7),b.Xb(14,"ng2-smart-table",6),b.fc("custom",(function(i){return e.onCustomAction(i,"source2")})),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()}2&i&&(b.Eb(12),b.nc("settings",e.settings1)("source",e.source),b.Eb(2),b.nc("settings",e.settings2)("source",e.source2))},directives:[o.x,o.z,o.L,o.w,o.pb,o.ob,c.b],styles:["[_nghost-%COMP%]   nb-tab[_ngcontent-%COMP%]{padding-left:0;padding-right:0}"]}),r),y=t("ofXK");function W(i,e){1&i&&(b.Xb(0,"h4"),b.Gc(1,"Adicionar Professores e Coordenadores"),b.Wb())}function X(i,e){1&i&&(b.Xb(0,"h4"),b.Gc(1,"Editar Professor"),b.Wb())}function C(i,e){1&i&&(b.Xb(0,"nb-select",21),b.Xb(1,"nb-option",22),b.Gc(2,"Coordenador"),b.Wb(),b.Xb(3,"nb-option",23),b.Gc(4,"Professor"),b.Wb(),b.Wb())}function k(i,e){1&i&&(b.Xb(0,"nb-select",24),b.Xb(1,"nb-option",22),b.Gc(2,"Coordenador"),b.Wb(),b.Xb(3,"nb-option",23),b.Gc(4,"Professor"),b.Wb(),b.Wb())}function P(i,e){1&i&&(b.Xb(0,"div",8),b.Gc(1,"Voc\xea precisa cadastrar as "),b.Xb(2,"a",28),b.Gc(3,"turmas"),b.Wb(),b.Gc(4," e "),b.Xb(5,"a",29),b.Gc(6,"disciplinas"),b.Wb(),b.Gc(7," antes de cadastrar um Professor "),b.Wb())}function I(i,e){if(1&i&&(b.Xb(0,"nb-option",38),b.Gc(1),b.Wb()),2&i){var t=e.$implicit;b.nc("value",t.id),b.Eb(1),b.Ic(" ",t.nome," ")}}function S(i,e){if(1&i&&(b.Xb(0,"nb-option",38),b.Gc(1),b.Wb()),2&i){var t=e.$implicit;b.nc("value",t._id),b.Eb(1),b.Ic(" ",t.nome," ")}}function D(i,e){if(1&i){var t=b.Yb();b.Xb(0,"div",31),b.Xb(1,"div",8),b.Xb(2,"div",1),b.Xb(3,"nb-select",32),b.Ec(4,I,2,2,"nb-option",33),b.Wb(),b.Xb(5,"nb-select",34),b.Ec(6,S,2,2,"nb-option",33),b.Wb(),b.Wb(),b.Wb(),b.Xb(7,"div",35),b.Xb(8,"button",36),b.fc("click",(function(){b.wc(t);var i=e.index;return b.hc(4).deleteTurmasDisciplinas(i)})),b.Sb(9,"nb-icon",37),b.Wb(),b.Wb(),b.Wb()}if(2&i){var n=e.index,r=b.hc(4);b.nc("formGroupName",n),b.Eb(4),b.nc("ngForOf",r.turmas),b.Eb(2),b.nc("ngForOf",r.disciplinas)}}function E(i,e){if(1&i&&(b.Xb(0,"div",8),b.Ec(1,D,10,3,"div",30),b.Wb()),2&i){var t=b.hc(3);b.Eb(1),b.nc("ngForOf",t.turmasDisciplinas.controls)}}function w(i,e){if(1&i&&(b.Xb(0,"div",25),b.Xb(1,"label",26),b.Gc(2," Turmas e Disciplinas:"),b.Wb(),b.Ec(3,P,8,0,"div",27),b.Ec(4,E,2,1,"div",27),b.Wb()),2&i){var t=b.hc(2);b.Eb(3),b.nc("ngIf",0==t.turmas.length||0==t.disciplinas.length),b.Eb(1),b.nc("ngIf",t.turmas.length>0&&t.disciplinas.length>0)}}function A(i,e){if(1&i){var t=b.Yb();b.Xb(0,"div",39),b.Xb(1,"button",40),b.fc("click",(function(){return b.wc(t),b.hc(2).addTurmasDisciplinas()})),b.Sb(2,"nb-icon",41),b.Gc(3," Adicionar Turma e Disciplina "),b.Wb(),b.Wb()}if(2&i){var n=b.hc(2);b.Eb(1),b.nc("disabled","Professor"!=n.form.controls.perfil.value)}}function O(i,e){if(1&i){var t=b.Yb();b.Xb(0,"form",5),b.Xb(1,"div",6),b.Xb(2,"label",7),b.Gc(3,"Nome"),b.Wb(),b.Xb(4,"div",8),b.Sb(5,"input",9),b.Wb(),b.Wb(),b.Xb(6,"div",6),b.Xb(7,"label",10),b.Gc(8,"CPF"),b.Wb(),b.Xb(9,"div",8),b.Sb(10,"input",11),b.Wb(),b.Wb(),b.Xb(11,"div",6),b.Xb(12,"label",12),b.Gc(13,"E-mail"),b.Wb(),b.Xb(14,"div",8),b.Sb(15,"input",13),b.Wb(),b.Wb(),b.Xb(16,"div",6),b.Xb(17,"label",14),b.Gc(18,"Perfil"),b.Wb(),b.Xb(19,"div",8),b.Ec(20,C,5,0,"nb-select",15),b.Ec(21,k,5,0,"nb-select",16),b.Wb(),b.Wb(),b.Ec(22,w,5,2,"div",17),b.Xb(23,"div",6),b.Ec(24,A,4,1,"div",18),b.Xb(25,"div",19),b.Xb(26,"button",20),b.fc("click",(function(){return b.wc(t),b.hc().Adicionar()})),b.Gc(27),b.Wb(),b.Wb(),b.Wb(),b.Wb()}if(2&i){var n=b.hc();b.nc("formGroup",n.form),b.Eb(20),b.nc("ngIf",!n.id),b.Eb(1),b.nc("ngIf",n.id),b.Eb(1),b.nc("ngIf","Professor"==n.form.controls.perfil.value&&!n.id),b.Eb(2),b.nc("ngIf",n.turmas.length>0&&n.disciplinas.length>0&&!n.id),b.Eb(2),b.nc("disabled",n.form.invalid||n.isLoading),b.Eb(1),b.Hc(n.id?"Editar":"Adicionar")}}var B,_,G=((B=function(){function i(e,t,n,r){var o=this;_classCallCheck(this,i),this.route=e,this.formBuilder=t,this.InstituicaoService=n,this.router=r,this.isLoading=!0,this.turmas=[],this.disciplinas=[],this.route.paramMap.subscribe((function(i){o.id=i.get("id"),o.getDisciplinas(),o.getTurmas(),o.id?o.getProfessorDetails():o.createForm()}))}return _createClass(i,[{key:"ngOnInit",value:function(){}},{key:"getTurmas",value:function(){var i=this;this.InstituicaoService.getTurmas().pipe(Object(m.a)((function(){}))).subscribe((function(e){i.isLoading=!1,e.forEach((function(e){e.series.forEach((function(e){e.turmas.forEach((function(e){i.turmas.push(e)}))}))})),console.log(i.turmas)}))}},{key:"getDisciplinas",value:function(){var i=this;this.InstituicaoService.getDisciplinas().pipe(Object(m.a)((function(){}))).subscribe((function(e){i.disciplinas=e}))}},{key:"addTurmasDisciplinas",value:function(i){console.log(i),this.turmasDisciplinas.push(this.formBuilder.group({turma:[i?i.id:"",a.B.required],disciplina:[i?i.disciplinas[0].idDisciplina:"",a.B.required]}))}},{key:"deleteTurmasDisciplinas",value:function(i){this.turmasDisciplinas.removeAt(i)}},{key:"getProfessorDetails",value:function(){var i=this;this.InstituicaoService.getProfessorId(this.id).pipe(Object(m.a)((function(){}))).subscribe((function(e){i.isLoading=!1;var t=e;i.createForm(t),console.log(t),t&&t.turmasDoProfessor.forEach((function(e){i.addTurmasDisciplinas(e)}))}))}},{key:"createForm",value:function(i){this.form=this.formBuilder.group({id:[i?i.id:""],nome:[i?i.nome:"",a.B.required],perfil:[i?i.perfil:"",a.B.required],email:[i?i.email:"",[a.B.required,a.B.email]],cpf:[i?i.cpf:"",[a.B.required,a.B.minLength(11),a.B.maxLength(11)]],turmasDisciplinas:this.formBuilder.array([])})}},{key:"Adicionar",value:function(){var i=this;this.isLoading=!0;var e=Object.assign({},this.form.value);console.log(e),this.id?this.InstituicaoService.editarProfessor(e).pipe(Object(m.a)((function(){i.isLoading=!1}))).subscribe((function(e){e&&(v.a.fire("Ok","Professor editado com sucesso","success"),i.router.navigateByUrl("/instituicao/usuarios/professores")),i.isLoading=!1})):this.InstituicaoService.inserirProfessor(e).pipe(Object(m.a)((function(){i.isLoading=!1}))).subscribe((function(e){i.isLoading=!1,e&&(v.a.fire("Ok","Professor adicionada com sucesso","success"),i.router.navigateByUrl("/instituicao/usuarios/professores"))}))}},{key:"inserirProfessorDisciplina",value:function(i){var e=this;this.InstituicaoService.inserirProfessorDisciplina(i).pipe(Object(m.a)((function(){e.isLoading=!1}))).subscribe((function(i){console.log(i)}))}},{key:"turmasDisciplinas",get:function(){return this.form.get("turmasDisciplinas")}}]),i}()).\u0275fac=function(i){return new(i||B)(b.Rb(u.a),b.Rb(a.e),b.Rb(d.a),b.Rb(u.c))},B.\u0275cmp=b.Lb({type:B,selectors:[["professores-adicionar"]],decls:8,vars:4,consts:[["nbSpinnerStatus","primary","nbSpinnerSize","large","nbSpinnerMessage","",3,"nbSpinner"],[1,"row"],[1,"col-md-5"],[4,"ngIf"],["action","",3,"formGroup",4,"ngIf"],["action","",3,"formGroup"],[1,"form-group","row"],["for","nome",1,"label","col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","nbInput","","fullWidth","","id","nome","placeholder","Nome","formControlName","nome"],["for","cpf",1,"label","col-sm-2","col-form-label"],["type","text","nbInput","","fullWidth","","id","cpf","placeholder","CPF","formControlName","cpf","mask","000.000.000-00"],["for","email",1,"label","col-sm-2","col-form-label"],["type","email","nbInput","","fullWidth","","id","email","placeholder","E-mail","formControlName","email"],["for","perfil",1,"label","col-sm-2","col-form-label"],["fullWidth","","id","perfil","placeholder","Selecione um Perfil","formControlName","perfil",4,"ngIf"],["disabled","","fullWidth","","id","perfil","placeholder","Selecione um Perfil","formControlName","perfil",4,"ngIf"],["formArrayName","turmasDisciplinas","class","form-group row",4,"ngIf"],["class","offset-sm-2 col-sm-10 mb-4",4,"ngIf"],[1,"offset-sm-2","col-sm-10"],["type","submit","nbButton","","status","primary",3,"disabled","click"],["fullWidth","","id","perfil","placeholder","Selecione um Perfil","formControlName","perfil"],["value","Coordenador"],["value","Professor"],["disabled","","fullWidth","","id","perfil","placeholder","Selecione um Perfil","formControlName","perfil"],["formArrayName","turmasDisciplinas",1,"form-group","row"],["for","turma",1,"label","col-sm-2","col-form-label"],["class","col-sm-10",4,"ngIf"],["routerLink","/instituicao/turmas/cadastrar"],["routerLink","/instituicao/disciplinas/cadastrar"],["class","row mb-2",3,"formGroupName",4,"ngFor","ngForOf"],[1,"row","mb-2",3,"formGroupName"],["fullWidth","","id","turma","placeholder","Selecione uma Turma","formControlName","turma",1,"col-sm-6"],[3,"value",4,"ngFor","ngForOf"],["fullWidth","","id","disciplina","placeholder","Selecione uma Disciplina","formControlName","disciplina",1,"col-sm-6"],[1,"col-sm-2"],["type","button","nbButton","","status","primary",3,"click"],["icon","minus-outline"],[3,"value"],[1,"offset-sm-2","col-sm-10","mb-4"],["type","button","nbButton","","status","primary",3,"disabled","click"],["icon","plus-outline"]],template:function(i,e){1&i&&(b.Xb(0,"nb-card",0),b.Xb(1,"nb-card-header"),b.Xb(2,"div",1),b.Xb(3,"div",2),b.Ec(4,W,2,0,"h4",3),b.Ec(5,X,2,0,"h4",3),b.Wb(),b.Wb(),b.Wb(),b.Xb(6,"nb-card-body"),b.Ec(7,O,28,7,"form",4),b.Wb(),b.Wb()),2&i&&(b.nc("nbSpinner",e.isLoading&&!e.form),b.Eb(4),b.nc("ngIf",!e.id),b.Eb(1),b.nc("ngIf",e.id),b.Eb(2),b.nc("ngIf",e.form))},directives:[o.x,o.lb,o.z,y.m,o.w,a.D,a.r,a.i,o.L,a.c,a.q,a.h,s.a,o.s,o.gb,o.bb,a.d,u.f,y.l,a.j,o.I],styles:[""]}),B),j=[{path:"",component:f,children:[{path:"",redirectTo:"listar",pathMatch:"full"},{path:"listar",component:g},{path:"adicionar",component:G},{path:"adicionar/:id",component:G}]}],T=((_=function i(){_classCallCheck(this,i)}).\u0275mod=b.Pb({type:_}),_.\u0275inj=b.Ob({factory:function(i){return new(i||_)},imports:[[u.g.forChild(j)],u.g]}),_);t.d(e,"ProfessoresModule",(function(){return N}));var L,N=((L=function i(){_classCallCheck(this,i)}).\u0275mod=b.Pb({type:L}),L.\u0275inj=b.Ob({factory:function(i){return new(i||L)},imports:[[o.A,o.vb,o.K,o.M,o.n,o.D,o.G,o.eb,o.hb,o.xb,l.a,o.t,T,c.c,a.y,s.b,o.mb,o.qb]]}),L)}}]);